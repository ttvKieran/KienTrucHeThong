{% extends 'base.html' %}

{% block title %}Chi ti·∫øt ƒë∆°n h√†ng #{{ order.id }}{% endblock %}

{% block content %}
<a href="{% url 'web_order_history' %}" class="btn btn-secondary" style="margin-bottom: 1rem;">‚Üê Quay l·∫°i</a>

<h2 style="margin-bottom: 1.5rem;">üì¶ Chi ti·∫øt ƒë∆°n h√†ng #{{ order.id }}</h2>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
    <div>
        <!-- Order Items -->
        <div class="card">
            <h3 style="margin-bottom: 1rem;">S·∫£n ph·∫©m</h3>
            <table>
                <thead>
                    <tr>
                        <th>S√°ch</th>
                        <th>Gi√°</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>Th√†nh ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order_items %}
                    <tr>
                        <td>
                            <strong>{{ item.book.title }}</strong><br>
                            <small>{{ item.book.author }}</small>
                        </td>
                        <td>${{ item.book.price }}</td>
                        <td>{{ item.quantity }}</td>
                        <td><strong>${{ item.book.price|floatformat:2 }}</strong></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div>
        <!-- Order Info -->
        <div class="card">
            <h3 style="margin-bottom: 1rem;">Th√¥ng tin ƒë∆°n h√†ng</h3>
            
            <p style="margin-bottom: 0.8rem;">
                <strong>Ng√†y ƒë·∫∑t:</strong> {{ order.order_date }}
            </p>
            <p style="margin-bottom: 0.8rem;">
                <strong>Tr·∫°ng th√°i:</strong>
                <span style="padding: 0.3rem 0.8rem; border-radius: 4px;
                             background: {% if order.status == 'Delivered' %}#d4edda{% elif order.status == 'Pending' %}#fff3cd{% else %}#d1ecf1{% endif %};
                             color: {% if order.status == 'Delivered' %}#155724{% elif order.status == 'Pending' %}#856404{% else %}#0c5460{% endif %};">
                    {{ order.status }}
                </span>
            </p>
            <p style="margin-bottom: 0.8rem;">
                <strong>Nh√¢n vi√™n x·ª≠ l√Ω:</strong> {{ order.staff.name }}
            </p>
            
            <hr style="margin: 1rem 0; border: none; border-top: 1px solid #ddd;">
            
            <p style="margin-bottom: 0.8rem;">
                <strong>Giao h√†ng:</strong> {{ order.shipping.method_name }}
            </p>
            <p style="margin-bottom: 0.8rem;">
                <strong>Ph√≠ ship:</strong> ${{ order.shipping.fee }}
            </p>
            <p style="margin-bottom: 0.8rem;">
                <strong>Thanh to√°n:</strong> {{ order.payment.method_name }}
            </p>
            <p style="margin-bottom: 0.8rem;">
                <strong>Tr·∫°ng th√°i TT:</strong> {{ order.payment.status }}
            </p>
            
            <hr style="margin: 1rem 0; border: none; border-top: 1px solid #ddd;">
            
            <p style="font-size: 1.3rem; margin-top: 1rem;">
                <strong>T·ªïng c·ªông:</strong> 
                <strong style="color: #27ae60;">${{ order.total_price }}</strong>
            </p>
        </div>
    </div>
</div>
{% endblock %}
